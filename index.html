<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pura Vida Envíos – Cotizador y Diseño</title>
  <style>
    :root{
      --azul:#0033A0; /* azul bandera CR (aprox) */
      --rojo:#CE1126; /* rojo bandera CR (aprox) */
      --blanco:#FFFFFF;
      --gris:#f5f7fb;
      --texto:#1f2937;
      --suave:#6b7280;
      --borde:#e5e7eb;
      --sombra:0 10px 25px rgba(0,0,0,.08);
      --radio:14px;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--gris);color:var(--texto);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Ubuntu,"Helvetica Neue",Arial,"Noto Sans",sans-serif;line-height:1.5}
    a{color:var(--azul);text-decoration:none}
    header{
      position:sticky;top:0;z-index:50;
      background:linear-gradient(90deg,var(--azul),var(--rojo));
      color:var(--blanco);
      box-shadow:var(--sombra);
    }
    .wrap{max-width:1100px;margin:0 auto;padding:0 20px}
    .nav{display:flex;align-items:center;justify-content:space-between;padding:14px 0}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;font-size:20px;letter-spacing:.2px}
    .brand-logo{
      width:40px;height:40px;border-radius:50%;
      background:var(--blanco);
      display:grid;place-items:center;
      color:var(--azul);font-weight:900;
    }
    .menu{display:flex;gap:18px;flex-wrap:wrap}
    .menu a{color:var(--blanco);opacity:.95}
    .menu a:hover{opacity:1;text-decoration:underline}
    .hero{
      background:linear-gradient(180deg,#fff, #f6f8ff);
      border-bottom:1px solid var(--borde);
    }
    .hero-in{
      display:grid;grid-template-columns:1.2fr 1fr;gap:30px;
      padding:40px 0;
    }
    .hero h1{font-size:42px;line-height:1.15;margin:0 0 12px}
    .hero p{font-size:18px;color:var(--suave);margin:0 0 22px}
    .cta{display:flex;gap:12px;flex-wrap:wrap}
    .btn{
      background:var(--rojo);color:var(--blanco);border:none;border-radius:14px;
      padding:12px 18px;font-weight:700;cursor:pointer;box-shadow:var(--sombra);
    }
    .btn.alt{background:var(--azul)}
    .card{
      background:var(--blanco);border:1px solid var(--borde);border-radius:var(--radio);
      padding:18px;box-shadow:var(--sombra);
    }
    .grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:16px}
    .feat h3{margin:6px 0 4px;font-size:18px}
    .feat p{margin:0;color:var(--suave);font-size:14px}
    .section{padding:36px 0}
    .section h2{margin:0 0 16px;font-size:28px}
    .muted{color:var(--suave);font-size:14px}
    /* Cotizador */
    .quote{display:grid;grid-template-columns:1.1fr .9fr;gap:20px}
    label{display:block;font-size:13px;margin-bottom:6px;color:#374151;font-weight:600}
    input[type="number"], select{
      width:100%;padding:12px;border:1px solid var(--borde);border-radius:12px;outline:none;
      background:#fff;
    }
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row3{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
    .opt{display:flex;gap:10px;flex-wrap:wrap;margin:6px 0 12px}
    .chip{
      display:inline-flex;align-items:center;gap:8px;
      border:1px solid var(--borde);border-radius:999px;padding:8px 12px;background:#fff;cursor:pointer;
      user-select:none;
    }
    .chip input{accent-color:var(--azul)}
    .note{background:#fff4f4;border:1px dashed #f3b0b0;color:#7c1d1d;padding:10px 12px;border-radius:12px;font-size:13px}
    .result{
      background:linear-gradient(180deg,#ffffff, #f7fbff);
      border:1px solid var(--borde);border-radius:16px;padding:16px;box-shadow:var(--sombra)
    }
    .price{font-size:36px;font-weight:900;color:var(--azul);margin:4px 0}
    .small{font-size:12px;color:var(--suave)}
    .disclaimer{font-size:12px;color:#6b7280;margin-top:8px}
    footer{
      margin-top:40px;background:linear-gradient(90deg,var(--azul),var(--rojo));color:#fff;
    }
    .foot{display:grid;grid-template-columns:2fr 1fr;gap:20px;padding:24px 0}
    .social{display:flex;gap:10px;align-items:center}
    .social span{opacity:.9}
    @media (max-width: 900px){
      .hero-in{grid-template-columns:1fr}
      .quote{grid-template-columns:1fr}
      .grid-3{grid-template-columns:1fr;gap:12px}
      .foot{grid-template-columns:1fr}
    }
    /* Flag stripe motif */
    .flagbar{height:8px;background:linear-gradient(90deg,var(--azul) 33.33%, var(--blanco) 33.33% 66.66%, var(--rojo) 66.66%)}
    .kbd{font-family: ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;background:#f3f4f6;border:1px solid #e5e7eb;border-bottom-width:2px;padding:2px 6px;border-radius:6px;font-size:12px}
  </style>
</head>
<body>
  <header>
    <div class="wrap nav">
      <div class="brand">
        <div class="brand-logo">PV</div>
        Pura Vida Envíos
      </div>
      <nav class="menu">
        <a href="#inicio">Inicio</a>
        <a href="#servicios">Servicios</a>
        <a href="#cotizador">Cotizador</a>
        <a href="#seguimiento">Seguimiento</a>
        <a href="#nosotros">Nosotros</a>
        <a href="#contacto">Contacto</a>
      </nav>
    </div>
    <div class="flagbar"></div>
  </header>

  <main id="inicio" class="hero">
    <div class="wrap hero-in">
      <div>
        <h1>Pura Vida Envíos</h1>
        <p>Tus compras internacionales llegan rápido y seguro a Costa Rica. Cotiza al instante y rastrea tus paquetes en línea.</p>
        <div class="cta">
          <a href="#cotizador" class="btn">Cotiza tu envío</a>
          <a href="#seguimiento" class="btn alt">Rastrea tu paquete</a>
        </div>
        <p class="disclaimer"><span class="kbd">Nota</span> Artículos peligrosos como <strong>sprays, envases al vacío</strong> y similares <strong>NO VUELAN</strong> por seguridad del vuelo.</p>
      </div>
      <div class="card">
        <h3 style="margin-top:0">Beneficios</h3>
        <div class="grid-3">
          <div class="feat">
            <h3>Servicio confiable</h3>
            <p>Recibimos desde EE.UU., Europa, Asia y Colombia.</p>
          </div>
          <div class="feat">
            <h3>Precios claros</h3>
            <p>Cotiza con peso o dimensiones según tu envío.</p>
          </div>
          <div class="feat">
            <h3>Atención cercana</h3>
            <p>Te acompañamos en todo el proceso. Pura vida.</p>
          </div>
        </div>
      </div>
    </div>
  </main>

  <section id="cotizador" class="section">
    <div class="wrap">
      <h2>Cotizador</h2>
      <div class="quote">
        <div class="card">
          <div class="row">
            <div>
              <label for="origen">Origen</label>
              <select id="origen">
                <option value="usa">EE.UU. y otros países</option>
                <option value="colombia">Colombia</option>
              </select>
            </div>
            <div>
              <label>Tipo de envío</label>
              <div class="opt" id="tipo-envio-opt">
                <label class="chip"><input type="radio" name="tipo" value="aereo" checked> Aéreo</label>
                <label class="chip"><input type="radio" name="tipo" value="maritimo"> Marítimo</label>
              </div>
            </div>
          </div>

          <div id="peso-block">
            <label>Peso</label>
            <div class="row">
              <input id="peso" type="number" min="0" step="0.01" placeholder="Ej: 5.5">
              <select id="unidad-peso">
                <option value="kg">kg</option>
                <option value="lb">lb</option>
              </select>
            </div>
            <div class="small" id="peso-convert"></div>
          </div>

          <div id="dim-block" style="display:none;margin-top:10px">
            <label>Dimensiones (solo marítimo)</label>
            <div class="row3">
              <div><input id="largo" type="number" min="0" step="0.1" placeholder="Largo"></div>
              <div><input id="ancho" type="number" min="0" step="0.1" placeholder="Ancho"></div>
              <div><input id="alto" type="number" min="0" step="0.1" placeholder="Alto"></div>
            </div>
            <div class="opt">
              <label class="chip"><input type="radio" name="unidad-dim" value="cm" checked> cm</label>
              <label class="chip"><input type="radio" name="unidad-dim" value="in"> pulgadas</label>
            </div>
          </div>

          <div class="note" style="margin-top:8px">
            <strong>Importante:</strong> Para Colombia solo se permiten envíos <u>aéreos</u> y la tarifa es <strong>$16 por kilo</strong>.
            Para otros orígenes: Aéreo <strong>$7.5 por libra</strong>. Marítimo <strong>$25 por pie cúbico</strong>.
          </div>
        </div>

        <div class="result">
          <div class="muted">Resultado estimado</div>
          <div class="price" id="precio">$0.00</div>
          <div id="detalle" class="muted"></div>
          <div class="disclaimer">Los montos mostrados son estimados. Tarifas pueden variar por revisión, seguros u otros factores.</div>
          <div style="margin-top:14px">
            <button class="btn" id="btn-solicitar">Solicitar cotización personalizada</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SECCIÓN DE SEGUIMIENTO CON FILTRADO POR NÚMERO DE GUÍA -->
  <section id="seguimiento" class="section" style="padding-top:0; background: url('fondo.jpg') no-repeat center center / cover; color:#fff;">
    <div class="wrap card" style="background: rgba(0,0,0,0.6);">
      <h2>Seguimiento de Paquetes</h2>
      <p class="muted" style="color:#ddd;">Consulta aquí el estado de tus envíos actualizados.</p>
      
      <div style="margin-bottom:12px;">
        <label for="input-guia" style="display:block; margin-bottom:6px; font-weight:600;">Número de guía</label>
        <input id="input-guia" type="text" placeholder="Ej: PV123456" style="width:100%; padding:10px; border-radius:8px; border:none; font-size:16px;">
      </div>

      <div id="tabla-seguimiento-container" style="overflow-x:auto; max-height:400px;">
        <table id="tabla-seguimiento" style="width:100%; border-collapse: collapse; min-width:600px;">
          <thead>
            <tr style="background:#0033A0;">
              <th style="padding:8px; border:1px solid #fff;">Número Guía</th>
              <th style="padding:8px; border:1px solid #fff;">Estado</th>
              <th style="padding:8px; border:1px solid #fff;">Fecha</th>
              <th style="padding:8px; border:1px solid #fff;">Observaciones</th>
            </tr>
          </thead>
          <tbody id="tabla-seguimiento-body">
            <tr><td colspan="4" style="text-align:center; padding:20px; color:#ddd;">Cargando datos...</td></tr>
          </tbody>
        </table>
      </div>

      <p id="no-result" style="display:none; color:#f88; margin-top:12px; font-weight:bold; text-align:center;">No se encontró información para ese número de guía.</p>
    </div>
  </section>

  <section id="nosotros" class="section">
    <div class="wrap grid-3">
      <div class="card">
        <h3>Nuestra historia</h3>
        <p>Somos Beto y Raquel. En Pura Vida Envíos ayudamos a que tus compras internacionales lleguen a Costa Rica sin estrés y con trato cercano.</p>
      </div>
      <div class="card">
        <h3>Cómo funciona</h3>
        <p>Compra en línea y envía a nuestra dirección. Nosotros gestionamos el resto. Recoge en Costa Rica o coordinamos entrega.</p>
      </div>
      <div class="card">
        <h3>Testimonios</h3>
        <p>“Excelente servicio, llegó rapidísimo.” – María, SJ<br>“Siempre atentos y claros en precios.” – Daniel, H.</p>
      </div>
    </div>
  </section>

  <section id="contacto" class="section">
    <div class="wrap card">
      <h2>Contacto</h2>
      <div class="row">
        <div>
          <p><strong>WhatsApp:</strong> 72683043</p>
          <p><strong>Instagram:</strong> @puravida_envios</p>
          <p class="muted">Para consultas especiales o carga comercial, escríbenos.</p>
        </div>
        <form onsubmit="event.preventDefault(); alert('¡Gracias! Te contactaremos pronto.');">
          <div class="row">
            <input placeholder="Nombre" required>
            <input placeholder="Email" type="email" required>
          </div>
          <input placeholder="Mensaje" required style="margin-top:10px">
          <div style="margin-top:10px">
            <button class="btn">Enviar</button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap foot">
      <div>
        <div class="brand" style="font-size:18px">
          <div class="brand-logo">PV</div>
          Pura Vida Envíos
        </div>
        <p class="small" style="margin:8px 0 0">© 2025 Pura Vida Envíos. Todos los derechos reservados.</p>
      </div>
      <div class="social">
        <span>Síguenos:</span>
        <a href="#" style="color:#fff">Instagram</a>
      </div>
    </div>
  </footer>

  <script>
    const origenSel = document.getElementById('origen');
    const tipoEnvioOpt = document.getElementById('tipo-envio-opt');
    const pesoInput = document.getElementById('peso');
    const unidadPeso = document.getElementById('unidad-peso');
    const pesoConvert = document.getElementById('peso-convert');
    const dimBlock = document.getElementById('dim-block');
    const precioEl = document.getElementById('precio');
    const detalleEl = document.getElementById('detalle');
    const largoEl = document.getElementById('largo');
    const anchoEl = document.getElementById('ancho');
    const altoEl = document.getElementById('alto');

    const KG_TO_LB = 2.20462;
    const CM3_TO_FT3 = 1/28316.8466;

    function actualizarDimensiones() {
      const tipo = document.querySelector('input[name="tipo"]:checked').value;
      if(tipo === 'maritimo'){
        dimBlock.style.display = 'block';
      } else {
        dimBlock.style.display = 'none';
      }
    }

    function convertirPeso(){
      let peso = parseFloat(pesoInput.value) || 0;
      if(unidadPeso.value === 'kg'){
        pesoConvert.textContent = `${(peso * KG_TO_LB).toFixed(2)} lb`;
      } else {
        pesoConvert.textContent = `${(peso / KG_TO_LB).toFixed(2)} kg`;
      }
    }

    function calcularPrecio(){
      const origen = origenSel.value;
      const tipo = document.querySelector('input[name="tipo"]:checked').value;
      let peso = parseFloat(pesoInput.value) || 0;

      if(origen === 'colombia'){
        // Solo aéreo permitido
        if(tipo !== 'aereo'){
          precioEl.textContent = 'N/A';
          detalleEl.textContent = 'Para Colombia solo hay servicio aéreo.';
          return;
        }
        precioEl.textContent = `$${(peso * 16).toFixed(2)}`;
        detalleEl.textContent = `Tarifa aérea Colombia: $16 por kilo x ${peso} kg.`;
        return;
      }

      if(tipo === 'aereo'){
        if(unidadPeso.value === 'kg'){
          peso = peso * KG_TO_LB; // convertir a lb para tarifa
        }
        precioEl.textContent = `$${(peso * 7.5).toFixed(2)}`;
        detalleEl.textContent = `Tarifa aérea: $7.5 por libra x ${peso.toFixed(2)} lb.`;
      } else {
        // marítimo
        // calcular volumen en pies cúbicos
        let largo = parseFloat(largoEl.value) || 0;
        let ancho = parseFloat(anchoEl.value) || 0;
        let alto = parseFloat(altoEl.value) || 0;

        const unidadDim = document.querySelector('input[name="unidad-dim"]:checked').value;
        if(unidadDim === 'cm'){
          largo /= 30.48; ancho /= 30.48; alto /= 30.48; // cm a ft aprox
        }

        const volumen = largo * ancho * alto;
        precioEl.textContent = `$${(volumen * 25).toFixed(2)}`;
        detalleEl.textContent = `Tarifa marítima: $25 por pie cúbico x ${volumen.toFixed(2)} ft³.`;
      }
    }

    origenSel.addEventListener('change', () => {
      if(origenSel.value === 'colombia'){
        // Forzar tipo aéreo y ocultar marítimo
        tipoEnvioOpt.querySelectorAll('input').forEach(radio => {
          if(radio.value === 'aereo'){
            radio.checked = true;
          }
          radio.disabled = radio.value !== 'aereo';
        });
        actualizarDimensiones();
        calcularPrecio();
      } else {
        tipoEnvioOpt.querySelectorAll('input').forEach(radio => {
          radio.disabled = false;
        });
        actualizarDimensiones();
        calcularPrecio();
      }
    });

    tipoEnvioOpt.addEventListener('change', () => {
      actualizarDimensiones();
      calcularPrecio();
    });

    pesoInput.addEventListener('input', () => {
      convertirPeso();
      calcularPrecio();
    });
    unidadPeso.addEventListener('change', () => {
      convertirPeso();
      calcularPrecio();
    });

    largoEl.addEventListener('input', calcularPrecio);
    anchoEl.addEventListener('input', calcularPrecio);
    altoEl.addEventListener('input', calcularPrecio);
    document.querySelectorAll('input[name="unidad-dim"]').forEach(el => el.addEventListener('change', calcularPrecio));

    // Inicial
    convertirPeso();
    actualizarDimensiones();
    calcularPrecio();

    // Seguimiento de paquetes
    const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRhS6Dnh3lb4fmBU-meYbG7lP1Qpg6-5HvsWqI06RdkHTFVkpx2u711X-v6encM-kLX53Wtrl5RSQS1/pub?output=csv&gid=0';
    let datosSeguimiento = [];

    function parseCSV(text) {
      const lines = text.trim().split('\n');
      const headers = lines.shift().split(',');
      return lines.map(line => {
        const values = line.split(',');
        let obj = {};
        headers.forEach((header, i) => {
          obj[header.trim()] = values[i]?.trim() || '';
        });
        return obj;
      });
    }

    async function cargarSeguimiento() {
      try {
        const res = await fetch(csvUrl);
        const text = await res.text();
        datosSeguimiento = parseCSV(text);

        mostrarDatos(datosSeguimiento);
      } catch (error) {
        document.getElementById('tabla-seguimiento-body').innerHTML = `<tr><td colspan="4" style="text-align:center; padding:20px; color:#f88;">Error cargando datos.</td></tr>`;
        console.error('Error cargando seguimiento:', error);
      }
    }

    function mostrarDatos(datos) {
      const tbody = document.getElementById('tabla-seguimiento-body');
      const noResult = document.getElementById('no-result');
      tbody.innerHTML = '';

      if (datos.length === 0) {
        noResult.style.display = 'block';
        tbody.innerHTML = '<tr><td colspan="4" style="text-align:center; padding:20px; color:#ddd;">No hay datos disponibles.</td></tr>';
        return;
      } else {
        noResult.style.display = 'none';
      }

      datos.forEach(item => {
        const tr = document.createElement('tr');
        tr.style.border = '1px solid #fff';
        tr.innerHTML = `
          <td style="padding:8px; border:1px solid #fff;">${item['Número Guía'] || item['Número'] || item['Guía'] || ''}</td>
          <td style="padding:8px; border:1px solid #fff;">${item['Estado'] || ''}</td>
          <td style="padding:8px; border:1px solid #fff;">${item['Fecha'] || ''}</td>
          <td style="padding:8px; border:1px solid #fff;">${item['Observaciones'] || ''}</td>
        `;
        tbody.appendChild(tr);
      });
    }

    document.getElementById('input-guia').addEventListener('input', (e) => {
      const valor = e.target.value.trim().toLowerCase();
      if (!valor) {
        mostrarDatos(datosSeguimiento);
        return;
      }
      const filtrados = datosSeguimiento.filter(item => {
        const guia = (item['Número Guía'] || item['Número'] || item['Guía'] || '').toLowerCase();
        return guia.includes(valor);
      });
      mostrarDatos(filtrados);
    });

    cargarSeguimiento();
  </script>
</body>
</html>
